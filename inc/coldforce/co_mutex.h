#ifndef _COLDFORCE_MUTEX_H_
#define _COLDFORCE_MUTEX_H_

#include <coldforce/co_std.h>

#ifdef CO_OS_WIN
#include <windows.h>
#elif defined(CO_OS_LINUX)
#include <pthread.h>
#elif defined(CO_OS_MAC)
#endif

//---------------------------------------------------------------------------//
// Mutex
//---------------------------------------------------------------------------//

//---------------------------------------------------------------------------//
//---------------------------------------------------------------------------//

typedef struct
{
#ifdef CO_OS_WIN
    CRITICAL_SECTION handle;
#elif defined(CO_OS_LINUX)
    pthread_mutex_t handle;
#elif defined(CO_OS_MAC)
#endif

} CO_MTX_T;

//---------------------------------------------------------------------------//
//---------------------------------------------------------------------------//

CO_EXTERN_C_BEGIN

//---------------------------------------------------------------------------//
// Private
//---------------------------------------------------------------------------//

//---------------------------------------------------------------------------//
// Public
//---------------------------------------------------------------------------//

CO_API CO_MTX_T* CO_MtxCreate();
CO_API void CO_MtxDestroy(CO_MTX_T** mtx);

CO_API void CO_MtxLock(CO_MTX_T* mtx);
CO_API void CO_MtxUnlock(CO_MTX_T* mtx);

//---------------------------------------------------------------------------//
//---------------------------------------------------------------------------//

CO_EXTERN_C_END

#endif // _COLDFORCE_MUTEX_H_
