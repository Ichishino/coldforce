#ifndef _COLDFORCE_APP_H_
#define _COLDFORCE_APP_H_

#include <coldforce/co_std.h>
#include <coldforce/co_thread.h>

//---------------------------------------------------------------------------//
// App
//---------------------------------------------------------------------------//

//---------------------------------------------------------------------------//
//---------------------------------------------------------------------------//

typedef struct
{
    int argc;
    char** argv;

    uintptr_t userData;

} CO_APP_PARAM_ST;

typedef struct
{
    CO_THREAD_T th;

} CO_APP_T;

//---------------------------------------------------------------------------//
//---------------------------------------------------------------------------//

CO_EXTERN_C_BEGIN

//---------------------------------------------------------------------------//
// Private
//---------------------------------------------------------------------------//

//---------------------------------------------------------------------------//
// Public
//---------------------------------------------------------------------------//

CO_API CO_APP_T* CO_AppCreate(const CO_CTX_ST* ctx);
CO_API void CO_AppDestroy(CO_APP_T** app);
CO_API int CO_AppRun(CO_APP_T* app, CO_APP_PARAM_ST* param);

CO_API int CO_AppStart(const CO_CTX_ST* ctx, CO_APP_PARAM_ST* param);
CO_API void CO_AppStop();

CO_API CO_APP_T* CO_AppGetCurrent();

//---------------------------------------------------------------------------//
//---------------------------------------------------------------------------//

CO_EXTERN_C_END

#endif // _COLDFORCE_APP_H_
